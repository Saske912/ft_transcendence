version: "3.3"
services:
  db:
    container_name: db
    image: postgres:11.13
    environment:
      - POSTGRES_USER=pfile
      - POSTGRES_PASSWORD=pfile
      - POSTGRES_DB=pfile
      - TZ=Europe/Moscow
      - PGTZ=Europe/Moscow
    ports:
      - "5432:5432" # todo [remove]
    volumes:
      - ./db/data:/var/lib/postgresql/data
      - ./db/scripts:/docker-entrypoint-initdb.d
    networks:
      - transcendence
#  nest:
#    container_name: nest-connector
#    build:
#      context: nest-connector
#    ports:
#      - "3000:3000"
#    volumes:
#      - ./nest-connector/app:/app
#    environment:
#      - TZ=Europe/Moscow
#      - DB_HOST=db
#      - POSTGRES_USER=pfile
#      - POSTGRES_PASSWORD=pfile
#      - POSTGRES_DB=pfile
#      - JWT_SECRET=4f0dbc852c89e3310b5acd7b5adcef4d49adanio125husb9zsabq1873b18vcas
#      - INTRA_UID=78dd66aae48217ac9e8fb560431d07074c767bfc2c507c2119ffaecf7874e32c
#      - INTRA_SECRET=764626658ad0f9fe0ed467f46e0593b673b046c37b8bf88035b61fe361d20ad3
#      - INTRA_REDIRECT=http://bandrw.local:3001/login
#      - TWILIO_ACCOUNT_SID=AC3ac2e7579d0557e934d8ee2c2ed8d5f4
#      - TWILIO_AUTH_TOKEN=45b1cce53d21dda00f410383b1cbd51e
#    networks:
#      transcendence:
#        ipv4_address: 172.20.0.5
#    depends_on:
#      - db
#  web:
#    container_name: web
#    build: ./web
#    ports:
#      - "8080:3000"
#    networks:
#      - transcendence
networks:
  transcendence:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/24
